<div style="width:70%; margin-left: auto; margin-right: auto;">
<h1>Settings</h1>
<!-- flash message div -->
<div class="flash-message" ng-if="flash">
    <div class="{{'alert alert-' + flash.type}}" ng-bind="flash.message"></div>
</div>

<!-- THIS added by dyano for uploading image please change variable names -->
<div class="col-md-8 col-md-offset-2">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h2 class="panel-title text-center">
                <span class="glyphicon glyphicon-user"></span>Superhero form 
            </h2>
        </div>
        <div class="panel-body">
            <!-- The form to add superheroes information -->
            <form name ="addForm" novalidate>
                <div class="form-group">
                    <label for="picture">Main picture</label>
                    <div class="text-center">
                        <button type="button" class="btn btn-default" ng-click="upload()">
                            Upload <span class="caret"></span>
                        </button>
                        <div style="margin-top:10px;">
                            <!-- Show the thumbnail only when the picture is uploaded -->
                            <a href="{{superhero.picture.url}}" class="thumbnail" ng-if="superhero.picture">
                            <!-- the picture is rendered with width: 500 and sharpened -->
                            <img ng-src="{{superhero.picture.url | fpConvert: {filter:'sharpen'} }}">
                            </a>
                        </div>                  
                    </div>
                </div>
                <hr />              
                <button type="submit" class="btn btn-danger btn-block" ng-click="createSuperhero()" ng-disabled="superhero.$invalid || !superhero.picture">Submit</button>             
            </form>
        </div>
    </div>
</div>
<!-- view the gallery of all the superheroes in the db -->
<div class="row">
    <div ng-repeat="superhero in superheroes.data">
        <div class="col-md-4 col-xs-6 col-sm-offset-0">            
        <div class="thumbnail">
          <img ng-src="{{superhero.picture.url | fpConvert: {filter:'sharpen', w:300, h:150} }}" />
          <div class="caption text-center">
              {{initials}}
          </div>
        </div>
        </div>  
    </div>
  </div>
</div>
<!-- end of THIS -->


<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
    <div class="modal-header">
      <h4 class="modal-title">Update Profile Picture</h4>
    </div>

    <div class="modal-body">
        <div ng-show="showAddFlash" class="flash-message" ng-if="flash">
            <div class="{{'alert alert-' + flash.type}}" ng-bind="flash.message"></div>
        </div>
        <form name = "updateProfilePicForm">
            <img ng-src="{{modalPic}}" ng-show="modalPic !== ''">
        </form>
    </div>
    <div ng-show="uploading" class="progress">
        <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
            <span class="sr-only">45% Complete</span>
        </div>
    </div>
    <div class="modal-footer" >
        <!--<button class="btn btn-success" ng-click="addUser()">Browse</button>-->
        <label class="btn btn-success">
            Browse
            <input type="file" ng-disabled="uploading" file-model="file.upload" name="myfile" style="display: none;" onchange="angular.element(this).scope().photoChanged(this.files)">
        </label>
        <button class="btn btn-primary" ng-click="Submit()">Save</button>
        <button type="button" class="btn btn-danger" ng-click="vm.restart()" data-dismiss="modal">Close</button>
        <br>
    </div>
  </div>
  
</div>
</div>


<div class="row">
    <div class="col-md-3">
        <br/>
        <div class="avatar-circle-big" ng-style="bgColor" ng-show="profilePicUrl == ''">
            <span class="initials-big noselect">{{initials}}</span>
        </div>
        <img class="avatar-circle-big" ng-src="{{profilePicUrl}}" ng-show="profilePicUrl !== ''">
        <br><br>
        <button class="btn btn-primary" data-toggle="modal" data-target="#myModal">Update Profile Picture</button>
    </div>
    
    <div class="col-md-1"></div>
    <div class="col-md-1 hidden-md hidden-s hidden-lg"><hr class="hr"></div>
    <div class="form-container col-md-6">
        <form method="post">
            <!--<div class="form-group">
                <label for="role">Role</label>
                <input type="text" id="role" class="form-control" ng-model="vm.user.role" required readonly />
            </div>
            <div class="form-group">
                <label for="firstName">First name</label>
                <input type="text" id="firstName" class="form-control" ng-model="vm.user.firstName" required />
            </div>
            <div class="form-group">
                <label for="lastName">Last name</label>
                <input type="text" id="lastName" class="form-control" ng-model="vm.user.lastName" required />
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="text" id="email" class="form-control" ng-model="vm.user.email" required />
            </div>
            <div class="form-group">
                <label for="oldPassword">Old Password</label>
                <input type="password" id="oldPassword" class="form-control" ng-model="vm.user.oldPassword" required/>
            </div>
            <div class="form-group">
                <label for="password">New Password</label>
                <input type="password" id="password" class="form-control" ng-model="vm.user.password" required/>
            </div>
            <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <input type="password" id="confirmPassword" class="form-control" ng-model="vm.user.confirmPassword" required/>
            </div>
            <div class="form-group" >
                <button class="btn btn-primary" ng-click="vm.saveUser()" style="float:right">Save</button>
            </div>-->
            <div ng-repeat="field in fields" ng-if="field.name !='password'">
                <label for="{{field.name}}" style="text-transform: capitalize;">{{field.name}}:</label>
                <input id="{{field.name}}" type="text" ng-model="aUsers[field.name]" class="form-control" ng-readonly="shw==false || field.name == 'email'" ng-required=field.required>
            </div>
            <div class="form-group">
                <label for="oldPassword">Old Password</label>
                <input type="password" id="oldPassword" class="form-control" ng-model="vm.user.oldPassword" required/>
            </div>
            <div class="form-group">
                <label for="password">New Password</label>
                <input type="password" id="password" class="form-control" ng-model="vm.user.password" required/>
            </div>
            <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <input type="password" id="confirmPassword" class="form-control" ng-model="vm.user.confirmPassword" required/>
            </div>
            <div class="form-group" >
                <button class="btn btn-primary" ng-click="vm.saveUser()" style="float:right">Save</button>
            </div>
    
        </form>
    </div>
</div>

</div>